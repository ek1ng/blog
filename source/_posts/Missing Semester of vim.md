---
title: The Missing Semester of Your CS Education(vim)
date: 2022-04-02 22:40:00
tags: [The Missing Semester of Your CS]
description: 计算机教育中缺失的一课 The Missing Semester of Your CS Education
---

# vim

首先vim的学习对我来说确实是比较刚需，随着linux的使用越来越多，我目前就只会进入插入模式，然后用dd删除，:wq或者:q退出，其他都不咋会用，很有必要研究一下vim的使用

## vim的设计

Vim 避免了使用鼠标，因为那样太慢了；Vim 甚至避免用 上下左右键因为那样需要太多的手指移动。

### 操作模式

Vim的设计以大多数时间都花在阅读、浏览和进行少量编辑改动为基础，因此它具有多种操作模式：

- *正常模式*：在文件中四处移动光标进行修改
- *插入模式*：插入文本
- *替换模式*：替换文本
- *可视化（一般，行，块）模式*：选中文本块
- *命令模式*：用于执行命令

在不同的操作模式下，键盘敲击的含义也不同。在默认设置下，Vim会在左下角显示当前的模式。 Vim启动时的默认模式是正常模式。通常你会把大部分 时间花在正常模式和插入模式。

你可以按下 `<ESC>` （退出键） 从任何其他模式返回正常模式。 在正常模式，键入 `i` 进入插入 模式， `R` 进入替换模式， `v` 进入可视（一般）模式， `V` 进入可视（行）模式， `Ctrl-V`进入可视（块）模式， `:` 进入命令模式。

### 编程思想

Vim 最重要的设计思想是 Vim 的界面本身是一个程序语言。键入操作 （以及他们的助记名） 本身是命令， 这些命令可以组合使用。 这使得移动和编辑更加高效，特别是一旦形成肌肉记忆。

## 如何使用

### 插入文本

按i进入插入模式后编辑文本

### 缓存， 标签页， 窗口

Vim 会维护一系列打开的文件，称为“缓存”。一个 Vim 会话包含一系列标签页，每个标签页包含 一系列窗口（分隔面板）。每个窗口显示一个缓存。跟网页浏览器等其他你熟悉的程序不一样的是， 缓存和窗口不是一一对应的关系；窗口只是视角。一个缓存可以在_多个_窗口打开，甚至在同一 个标签页内的多个窗口打开。这个功能其实很好用，比如在查看同一个文件的不同部分的时候。`vim -o file1 file2`可以打开多个窗口，`:split file2` 新建一个窗口,`:vsplit file2`新建垂直分割窗口

### 命令行模式

- `:q`退出
- `:w`保存
- `:wq`保存退出
- `:e filename`打开要编辑的文件
- `ls`显示打开的缓存
- `help name`打开name的帮助文档

### 如何移动光标

多数时候你会在正常模式下，使用移动命令在缓存中导航。在 Vim 里面移动也被称为 “名词”， 因为它们指向文字块。

- 基本移动: `hjkl` （左， 下， 上， 右）(感觉上下左右就够用)

- 词： `w` （下一个词）， `b` （词初）， `e` （词尾）

- 行： `0` （行初）， `^` （第一个非空格字符）， `$` （行尾）

- 屏幕： `H` （屏幕首行）， `M` （屏幕中间）， `L` （屏幕底部）

- 翻页： `Ctrl-u` （上翻）， `Ctrl-d` （下翻）

- 文件： `gg` （文件头）， `G` （文件尾）

- 行数： `:{行数}<CR>` 或者 `{行数}G` ({行数}为行数)

- 杂项： `%` （找到配对，比如括号或者 /* */ 之类的注释对）

- 查找： `f{字符}`,  `t{字符}`，`F{字符}`，`T{字符}`
  - 查找/到 向前/向后 在本行的{字符}
  - `,` / `;` 用于导航匹配

- 搜索: `/{正则表达式}`, `n` / `N` 用于导航匹配

### 选择

在可视化模式:

- 可视化：`v`
- 可视化行： `V`
- 可视化块：`Ctrl+v`

可以用`hjkl` 移动命令来选中，这样的话就可以选中一大段删除，之前一直在正常模式`dd`删除效率·1很低

### 编辑

所有你需要用鼠标做的事， 你现在都可以用键盘：采用编辑命令和移动命令的组合来完成。 这就是 Vim 的界面开始看起来像一个程序语言的时候。Vim 的编辑命令也被称为 “动词”， 因为动词可以施动于名词。`

- `i`进入插入模式
  - 但是对于操纵/编辑文本，不单想用退格键完成
  
- `O` / `o` 在之上/之下插入行

- d{移动命令}删除 {移动命令}

  - 例如， `dw` 删除词, `d$` 删除到行尾, `d0` 删除到行头。

- c{移动命令}改变 {移动命令}

  - 例如， `cw` 改变词
  - 比如 `d{移动命令}` 再 `i`

- `x` 删除字符（等同于 `dl`）

- `s` 替换字符（等同于 `xi`）

- 可视化模式 + 操作

  - 选中文字, `d` 删除 或者 `c` 改变

- `u` 撤销, `<C-r>` 重做

- `y` 复制 / “yank” （其他一些命令比如 `d` 也会复制）

- `p` 粘贴

- 更多值得学习的: 比如 `~` 改变字符的大小写

### 执行指定操作若干次

你可以用一个计数来结合“名词”和“动词”，这会执行指定操作若干次。

- `3w` 向前移动三个词
- `5j` 向下移动5行
- `7dw` 删除7个词

剩下的确实不太看得进去了，感觉上面看完已经可以基本使用了，剩下的内容需要在使用vim的过程中不断使用搜索引擎，然后寻找更好的解决当前问题的方法来提升自己。

## 课后练习

>完成vimtutor(vim自带的教程，在命令行输入vim即可)

>
>
>在使用中学习，而不是在记忆中学习

vimtutor主要是vim自带的一个教程，在实践中可以更好的学习vim

下面这个还是比较受用的，就是操作符 + 操作对象 操作对象也可以单独使用，比如w就是从光标移动到下一个单词初始

![image-20220402215530244](https://ek1ng-typora.oss-cn-hangzhou.aliyuncs.com/img/image-20220402215530244.png)

终于做完了，后面感觉不太用得上就先没看，我在linux下编辑代码也比较习惯能用鼠标的vscode这些，所以说大括号如何匹配啊这种写代码的操作就没怎么尝试了。

>1. 下载我们的[vimrc](https://missing-semester-cn.github.io/2020/files/vimrc)，然后把它保存到 `~/.vimrc`。 通读这个注释详细的文件 （用 Vim!）， 然后观察 Vim 在这个新的设置下看起来和使用起来有哪些细微的区别。

![image-20220402222555567](https://ek1ng-typora.oss-cn-hangzhou.aliyuncs.com/img/image-20220402222555567.png)

首先左边有个帮忙统计行数的插件，然后有代码高亮，禁止使用了四个方向键并且有对应错误提示

，也没怎么仔细看，大概这样，英文注释有点看不进去。

>安装和配置一个插件： `ctrlp.vim`.

>自定义 CtrlP： 添加 [configuration](https://github.com/ctrlpvim/ctrlp.vim/blob/master/readme.md#basic-options) 到你的 ~/.vimrc 来用按 Ctrl-P 打开 CtrlP

折磨 目前不打算换vim编辑代码，好烦，这些就不做了

>进一步自定义你的 ~/.vimrc 和安装更多插件。 安装插件最简单的方法是使用 Vim 的包管理器，即使用 vim-plug 安装插件

插件也不知道为啥装不上，吐了

总的来说还是收获不少，至少看完后可以有一定效率的用vim解决大多数问题，效率目前肯定没有用鼠标操控的文本编辑器效率高，但是还是算是会用了，反正越用越熟练嘛效率自然就上去了。

